!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="javascripts/",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";var n=i(2);n.EditForm={settings:{editFormSelector:"#entry-form",fieldsContainerSelector:"#fields",fieldsSelector:".field:not(#title-field)",entryTypeSelectSelector:"#entryType",lightswitchContainerSelector:".lightswitch",positionSelectContainerSelector:".btngroup"},init:function(){if(this.$container=$(this.settings.editFormSelector),0===this.$container.length)return!1;if(this.sectionId=parseInt(this.$container.find('input[name="sectionId"]').val()),this.sectionId&&(this.elementType="entries"),this.$entryTypeSelect=$(this.settings.entryTypeSelectSelector),0===this.$entryTypeSelect.length){var t=n.getEntryTypeIdsBySectionId(this.sectionId);this.entryTypeId=t&&t.length>0?t.shift():!1}else this.entryTypeId=this.$entryTypeSelect.val();this.currentUrl=window.location.href,$(document).ajaxComplete($.proxy(this.onAjaxComplete,this)),this.$container.on("click",this.settings.fieldsSelector+'[data-toggle="1"]',$.proxy(this.onInputWrapperClick,this)).on("change keyup",this.settings.fieldsSelector+'[data-toggle="1"] *:input',$.proxy(this.onFieldInputChange,this)),this.render()},render:function(){this.initToggleFields()&&this.evaluateConditionals()},initToggleFields:function(){var t=n.getConditionalsDataByEntryTypeId(this.entryTypeId);if(!t||t.sectionId!=this.sectionId||t.typeId!=this.entryTypeId||!t.conditionals)return!1;if(this.conditionals=t.conditionals,this.$fieldContainer=$(this.settings.fieldsContainerSelector),this.$fields=this.$fieldContainer.find(this.settings.fieldsSelector),0===this.$fieldContainer.length||0===this.$fields.length)return!1;var e=[];for(a in this.conditionals)for(var i=0;i<this.conditionals[a].length;++i)e.push(this.conditionals[a][i][0].fieldId);var r,s,a,o=this;return this.$fields.each(function(){r=$(this),s=r.attr("id").split("-")[1]||!1,a=n.getFieldIdByHandle(s),a&&r.attr("data-id",a),o.conditionals[a]&&r.attr("data-target",1),e.indexOf(parseInt(a))>-1&&r.attr("data-toggle",1)}),!0},evaluateConditionals:function(t){var e,i,r,s,a,o,d,l,c,h=this,f=this.$fieldContainer.find(this.settings.fieldsSelector+'[data-target="1"]');f.removeClass("reasonsHide").each(function(){if(e=$(this),i=h.conditionals[e.data("id")]||!1){for(var t=i.length,f=t,u=0;t>u;++u){r=!0,s=i[u];for(var p=0;p<s.length;++p)if(a=s[p],o=h.$fieldContainer.find(h.settings.fieldsSelector+'[data-id="'+a.fieldId+'"]'),0!==o.length){switch(l=n.getToggleFieldById(a.fieldId),c=null,l.type){case"Lightswitch":d=o.find("*:input:first"),d.length>0&&(c="1"===d.val()?"true":"false");break;case"Checkboxes":case"RadioButtons":c=o.find("input:checkbox:checked,input:radio:checked").map(function(){return $(this).val()}).get();break;default:d=o.find("*:input:first"),c=d.val()}switch($.isArray(c)&&(c=c.join("")),$.isArray(a.value)&&(a.value=a.value.join("")),a.compare){case"!=":c==a.value&&(r=!1);break;case"==":default:c!=a.value&&(r=!1)}if(!r){f--;break}}}0>=f&&e.addClass("reasonsHide")}})},onAjaxComplete:function(t,e,i){return-1===i.url.indexOf("switchEntryType")?!1:(this.entryTypeId=this.$entryTypeSelect.val(),void this.render())},onInputWrapperClick:function(t){$(t.currentTarget).find("input:first").trigger("change")},onFieldInputChange:function(t){this.evaluateConditionals()}},window.$&&$(function(){n.EditForm.init()})},function(t,e){"use strict";var i=e;window.$&&$(function(){i.data=window._ReasonsData||!1}),i.getToggleFields=function(){return i.data.toggleFields||[]},i.getToggleFieldById=function(t){t=parseInt(t);for(var e=i.getToggleFields(),n=e.length,r=0;n>r;++r)if(parseInt(e[r].id)===t)return e[r];return!1},i.getConditionalsDataByEntryTypeId=function(t){for(var e,n=0;n<i.data.conditionals.length;++n)if(e=i.data.conditionals[n],e.typeId==t)return e;return!1},i.getEntryTypeIdsBySectionId=function(t){return i.data.entryTypeIds&&i.data.entryTypeIds.hasOwnProperty(t)?i.data.entryTypeIds[t]:!1},i.getFieldIdByHandle=function(t){return i.data.fieldIds&&i.data.fieldIds.hasOwnProperty(t)?i.data.fieldIds[t]:!1}}]);